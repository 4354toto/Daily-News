name: Daily News Simple

on:
  schedule:
    # æ¯å¤© UTC 1:00 è§¦å‘ (åŒ—äº¬æ—¶é—´ 9:00)
    - cron: '0 1 * * *'
  workflow_dispatch:

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
    - name: Send Daily News
      env:
        COZE_TOKEN: ${{ secrets.COZE_TOKEN }}
      run: |
        echo "ğŸ“… æ‰§è¡Œæ—¥æœŸ: $(TZ="Asia/Shanghai" date '+%Y-%m-%d')"
        echo "ğŸ•˜ æ‰§è¡Œæ—¶é—´: $(TZ="Asia/Shanghai" date '+%H:%M:%S')"
        echo "ğŸš€ å‘é€æ¯æ—¥èµ„è®¯..."
        
        # è°ƒç”¨æ‰£å­API
        curl -X POST "https://api.coze.cn/v1/workflow/stream_run" \
          -H "Content-Type: application/json" \
          -H "Authorization: Bearer $COZE_TOKEN" \
          -d '{"workflow_id": "7565827159563550756", "parameters": {}}' \
          -w "APIçŠ¶æ€ç : %{http_code}\n" -s
        
        echo "âœ… æ¯æ—¥èµ„è®¯å‘é€å®Œæˆ"
