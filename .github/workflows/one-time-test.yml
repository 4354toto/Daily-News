name: One Time Test - 23:25

on:
  schedule:
    # åŒ—äº¬æ—¶é—´ 23:25 = UTC 15:25
    - cron: '25 15 30 10 *'  # ä»…2025å¹´10æœˆ30æ—¥ UTC 15:25è§¦å‘
  workflow_dispatch:

jobs:
  test-trigger:
    runs-on: ubuntu-latest
    steps:
    - name: æµ‹è¯•å®šæ—¶è§¦å‘
      run: |
        echo "ğŸ¯ ä¸€æ¬¡æ€§å®šæ—¶æµ‹è¯•"
        echo "========================"
        echo "è®¡åˆ’è§¦å‘æ—¶é—´: 23:25 (åŒ—äº¬æ—¶é—´)"
        echo "å®é™…è§¦å‘æ—¶é—´: $(TZ="Asia/Shanghai" date '+%H:%M:%S')"
        echo "æ—¥æœŸ: $(TZ="Asia/Shanghai" date '+%Y-%m-%d')"
        echo "========================"
        echo "âœ… å¦‚æœçœ‹åˆ°æ­¤æ¶ˆæ¯ï¼Œè¯´æ˜å®šæ—¶è§¦å‘æˆåŠŸï¼"
        echo "ğŸ“Š GitHub Actions å®šæ—¶åŠŸèƒ½æ­£å¸¸"
        echo "ğŸ’¡ ä¸»å·¥ä½œæµå°†åœ¨å·¥ä½œæ—¥9:00è‡ªåŠ¨è¿è¡Œ"

    - name: æ¨¡æ‹Ÿä¸»å·¥ä½œæµ
      env:
        COZE_TOKEN: ${{ secrets.COZE_TOKEN }}
      run: |
        echo "ğŸš€ æ¨¡æ‹Ÿä¸»å·¥ä½œæµæ‰§è¡Œ..."
        echo "è°ƒç”¨æ‰£å­API..."
        
        # å®é™…è°ƒç”¨APIï¼ˆä¸ä¸»å·¥ä½œæµç›¸åŒï¼‰
        curl -X POST "https://api.coze.cn/v1/workflow/stream_run" \
          -H "Content-Type: application/json" \
          -H "Authorization: Bearer $COZE_TOKEN" \
          -d '{"workflow_id": "7565827159563550756", "parameters": {}}' \
          -w "APIçŠ¶æ€ç : %{http_code}\n" -s
        
        echo "âœ… æµ‹è¯•å®Œæˆï¼"
        echo "ğŸ‰ å®šæ—¶åŠŸèƒ½éªŒè¯æˆåŠŸ"

    - name: æ¸…ç†æç¤º
      run: |
        echo "ğŸ’¡ æç¤º: æ­¤å·¥ä½œæµä¸ºä¸€æ¬¡æ€§æµ‹è¯•"
        echo "ğŸ“ æµ‹è¯•å®Œæˆåå¯åˆ é™¤æ­¤æ–‡ä»¶"
        echo "ğŸ•˜ ä¸»å·¥ä½œæµé…ç½®æ­£å¸¸ï¼Œå°†åœ¨å·¥ä½œæ—¥9:00è¿è¡Œ"
